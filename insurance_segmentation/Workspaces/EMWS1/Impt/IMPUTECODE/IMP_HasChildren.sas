*;
* IMPUTE VARIABLE: HasChildren;
*;
format IMP_HasChildren BEST12.0;
label IMP_HasChildren = 'Imputed HasChildren';
IMP_HasChildren = HasChildren;
if IMP_HasChildren eq . then do;
****************************************************************;
****** DECISION TREE SCORING CODE ******;
****************************************************************;
****** LENGTHS OF NEW CHARACTER VARIABLES ******;
LENGTH I_HasChildren $ 12;
LENGTH _WARN_ $ 4;
****** LABELS FOR NEW VARIABLES ******;
LABEL P_HasChildren1 = 'Predicted: HasChildren=1';
LABEL P_HasChildren0 = 'Predicted: HasChildren=0';
LABEL Q_HasChildren1 = 'Unadjusted P: HasChildren=1';
LABEL Q_HasChildren0 = 'Unadjusted P: HasChildren=0';
LABEL I_HasChildren = 'Into: HasChildren';
LABEL U_HasChildren = 'Unnormalized Into: HasChildren';
LABEL _WARN_ = 'Warnings';
****** TEMPORARY VARIABLES FOR FORMATTED VALUES ******;
LENGTH _ARBFMT_12 $ 12;
DROP _ARBFMT_12;
_ARBFMT_12 = ' ';
/* Initialize to avoid warning. */
LENGTH _ARBFMT_15 $ 15;
DROP _ARBFMT_15;
_ARBFMT_15 = ' ';
/* Initialize to avoid warning. */
****** ASSIGN OBSERVATION TO NODE ******;
DROP _BRANCH_;
_BRANCH_ = -1;
IF NOT MISSING(CustomerAge ) AND
CustomerAge < 63.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(CustomerAge ) AND
63.5 <= CustomerAge THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(GrossMonthlySalary ) THEN DO;
IF GrossMonthlySalary < 6675 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 6675 <= GrossMonthlySalary THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(PremiumsinLOBHealth ) AND
PremiumsinLOBHealth < 155.085 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PremiumsinLOBHealth ) AND
155.085 <= PremiumsinLOBHealth THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBMotor ) THEN DO;
IF 379.85 <= PremiumsinLOBMotor THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBMotor < 379.85 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(ClaimsRate ) THEN DO;
IF ClaimsRate < 0.26770824702269 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 0.26770824702269 <= ClaimsRate THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(CustomerAge ) AND
CustomerAge < 65.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(CustomerAge ) AND
65.5 <= CustomerAge THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(GrossMonthlySalary ) THEN DO;
IF GrossMonthlySalary < 6104 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 6104 <= GrossMonthlySalary THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(CustomerMonetaryValue ) THEN DO;
IF 1037.93 <= CustomerMonetaryValue THEN DO;
_BRANCH_ = 1;
END;
ELSE IF CustomerMonetaryValue < 1037.93 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_HasChildren1 = 0.70149253731343;
P_HasChildren0 = 0.29850746268656;
Q_HasChildren1 = 0.70149253731343;
Q_HasChildren0 = 0.29850746268656;
I_HasChildren = '1';
U_HasChildren = 1;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(PremiumsinLOBMotor ) AND
PremiumsinLOBMotor < 254.88 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PremiumsinLOBMotor ) AND
254.88 <= PremiumsinLOBMotor THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBLife ) THEN DO;
IF 67.235 <= PremiumsinLOBLife THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBLife < 67.235 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBHousehold ) THEN DO;
IF 352.575 <= PremiumsinLOBHousehold THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBHousehold < 352.575 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_HasChildren1 = 0.06578947368421;
P_HasChildren0 = 0.93421052631578;
Q_HasChildren1 = 0.06578947368421;
Q_HasChildren0 = 0.93421052631578;
I_HasChildren = '0';
U_HasChildren = 0;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(PremiumsinLOBMotor ) AND
PremiumsinLOBMotor < 434.86 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PremiumsinLOBMotor ) AND
434.86 <= PremiumsinLOBMotor THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBHealth ) THEN DO;
IF 100.63 <= PremiumsinLOBHealth THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBHealth < 100.63 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBHousehold ) THEN DO;
IF -0.275 <= PremiumsinLOBHousehold THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBHousehold < -0.275 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
P_HasChildren1 = 0.58181818181818;
P_HasChildren0 = 0.41818181818181;
Q_HasChildren1 = 0.58181818181818;
Q_HasChildren0 = 0.41818181818181;
I_HasChildren = '1';
U_HasChildren = 1;
END;
ELSE DO;
_BRANCH_ = -1;
_ARBFMT_15 = PUT( EducationalDegree , $CHAR15.);
%DMNORMIP( _ARBFMT_15);
IF _ARBFMT_15 IN ('1 - BASIC' ,'2 - HIGH SCHOOL' ) THEN DO;
_BRANCH_ = 1;
END;
ELSE IF _ARBFMT_15 IN ('3 - BSC/MSC' ,'4 - PHD' ) THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBMotor ) THEN DO;
IF PremiumsinLOBMotor < 333.34 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 333.34 <= PremiumsinLOBMotor THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBWorkComp ) THEN DO;
IF 57.51 <= PremiumsinLOBWorkComp THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBWorkComp < 57.51 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_HasChildren1 = 0.5268817204301;
P_HasChildren0 = 0.47311827956989;
Q_HasChildren1 = 0.5268817204301;
Q_HasChildren0 = 0.47311827956989;
I_HasChildren = '1';
U_HasChildren = 1;
END;
ELSE DO;
P_HasChildren1 = 0.27380952380952;
P_HasChildren0 = 0.72619047619047;
Q_HasChildren1 = 0.27380952380952;
Q_HasChildren0 = 0.72619047619047;
I_HasChildren = '0';
U_HasChildren = 0;
END;
END;
END;
END;
END;
ELSE DO;
P_HasChildren1 = 0.0950323974082;
P_HasChildren0 = 0.90496760259179;
Q_HasChildren1 = 0.0950323974082;
Q_HasChildren0 = 0.90496760259179;
I_HasChildren = '0';
U_HasChildren = 0;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(PremiumsinLOBLife ) AND
PremiumsinLOBLife < 37.785 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PremiumsinLOBLife ) AND
37.785 <= PremiumsinLOBLife THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBMotor ) THEN DO;
IF 271.44 <= PremiumsinLOBMotor THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBMotor < 271.44 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBHousehold ) THEN DO;
IF PremiumsinLOBHousehold < 243.1 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 243.1 <= PremiumsinLOBHousehold THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
IF NOT MISSING(CustomerAge ) AND
61.5 <= CustomerAge THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(PremiumsinLOBMotor ) AND
PremiumsinLOBMotor < 221.43 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PremiumsinLOBMotor ) AND
221.43 <= PremiumsinLOBMotor THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBHealth ) THEN DO;
IF 190.98 <= PremiumsinLOBHealth THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBHealth < 190.98 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBLife ) THEN DO;
IF 77.625 <= PremiumsinLOBLife THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBLife < 77.625 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_HasChildren1 = 0.33333333333333;
P_HasChildren0 = 0.66666666666666;
Q_HasChildren1 = 0.33333333333333;
Q_HasChildren0 = 0.66666666666666;
I_HasChildren = '0';
U_HasChildren = 0;
END;
ELSE DO;
P_HasChildren1 = 0.73255813953488;
P_HasChildren0 = 0.26744186046511;
Q_HasChildren1 = 0.73255813953488;
Q_HasChildren0 = 0.26744186046511;
I_HasChildren = '1';
U_HasChildren = 1;
END;
END;
ELSE DO;
P_HasChildren1 = 0.81473377097009;
P_HasChildren0 = 0.1852662290299;
Q_HasChildren1 = 0.81473377097009;
Q_HasChildren0 = 0.1852662290299;
I_HasChildren = '1';
U_HasChildren = 1;
END;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(CustomerAge ) AND
CustomerAge < 55.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(CustomerAge ) AND
55.5 <= CustomerAge THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(GrossMonthlySalary ) THEN DO;
IF GrossMonthlySalary < 6237.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 6237.5 <= GrossMonthlySalary THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_HasChildren1 = 0.93665602749815;
P_HasChildren0 = 0.06334397250184;
Q_HasChildren1 = 0.93665602749815;
Q_HasChildren0 = 0.06334397250184;
I_HasChildren = '1';
U_HasChildren = 1;
END;
ELSE DO;
_BRANCH_ = -1;
IF NOT MISSING(CustomerAge ) AND
CustomerAge < 62.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(CustomerAge ) AND
62.5 <= CustomerAge THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBHousehold ) THEN DO;
IF PremiumsinLOBHousehold < 888.5 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF 888.5 <= PremiumsinLOBHousehold THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 1;
IF _BRANCH_ EQ 2 THEN DO;
_BRANCH_ = -1;
IF NOT MISSING(PremiumsinLOBMotor ) AND
PremiumsinLOBMotor < 322.115 THEN DO;
_BRANCH_ = 1;
END;
ELSE IF NOT MISSING(PremiumsinLOBMotor ) AND
322.115 <= PremiumsinLOBMotor THEN DO;
_BRANCH_ = 2;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBHealth ) THEN DO;
IF 195.315 <= PremiumsinLOBHealth THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBHealth < 195.315 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 AND NOT MISSING(PremiumsinLOBHousehold ) THEN DO;
IF 188.925 <= PremiumsinLOBHousehold THEN DO;
_BRANCH_ = 1;
END;
ELSE IF PremiumsinLOBHousehold < 188.925 THEN DO;
_BRANCH_ = 2;
END;
END;
IF _BRANCH_ LT 0 THEN _BRANCH_ = 2;
IF _BRANCH_ EQ 1 THEN DO;
P_HasChildren1 = 0.27777777777777;
P_HasChildren0 = 0.72222222222222;
Q_HasChildren1 = 0.27777777777777;
Q_HasChildren0 = 0.72222222222222;
I_HasChildren = '0';
U_HasChildren = 0;
END;
ELSE DO;
P_HasChildren1 = 0.77380952380952;
P_HasChildren0 = 0.22619047619047;
Q_HasChildren1 = 0.77380952380952;
Q_HasChildren0 = 0.22619047619047;
I_HasChildren = '1';
U_HasChildren = 1;
END;
END;
ELSE DO;
P_HasChildren1 = 0.8207171314741;
P_HasChildren0 = 0.17928286852589;
Q_HasChildren1 = 0.8207171314741;
Q_HasChildren0 = 0.17928286852589;
I_HasChildren = '1';
U_HasChildren = 1;
END;
END;
END;
END;
****************************************************************;
****** END OF DECISION TREE SCORING CODE ******;
****************************************************************;
*;
* ASSIGN VALUE TO: HasChildren;
*;
length _format200 $200;
drop _format200;
_format200 = strip(I_HasChildren);
if _format200="1" then IMP_HasChildren = 1;
else
if _format200="0" then IMP_HasChildren = 0;
END;
